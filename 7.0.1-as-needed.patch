--- origsrc/llvm-7.0.1.src/tools/llvm-cfi-verify/lib/CMakeLists.txt	2018-05-08 21:07:02.000000000 -0400
+++ src/llvm-7.0.1.src/tools/llvm-cfi-verify/lib/CMakeLists.txt	2019-05-06 13:33:27.353425700 -0400
@@ -1,4 +1,4 @@
-add_library(LLVMCFIVerify
+llvm_add_library(LLVMCFIVerify
   STATIC
   FileAnalysis.cpp
   FileAnalysis.h
@@ -7,7 +7,7 @@ add_library(LLVMCFIVerify
   )
 
 llvm_update_compile_flags(LLVMCFIVerify)
-llvm_map_components_to_libnames(libs
+set(LLVM_LINK_COMPONENTS
   DebugInfoDWARF
   MC
   MCParser
@@ -15,5 +15,4 @@ llvm_map_components_to_libnames(libs
   Support
   Symbolize
   )
-target_link_libraries(LLVMCFIVerify ${libs})
 set_target_properties(LLVMCFIVerify PROPERTIES FOLDER "Libraries")
--- origsrc/llvm-7.0.1.src/tools/llvm-exegesis/lib/AArch64/CMakeLists.txt	2018-07-03 06:10:29.000000000 -0400
+++ src/llvm-7.0.1.src/tools/llvm-exegesis/lib/AArch64/CMakeLists.txt	2019-05-06 13:36:39.729191700 -0400
@@ -3,16 +3,15 @@ include_directories(
   ${LLVM_BINARY_DIR}/lib/Target/AArch64
   )
 
-add_library(LLVMExegesisAArch64
+llvm_add_library(LLVMExegesisAArch64
   STATIC
   Target.cpp
   )
 
 llvm_update_compile_flags(LLVMExegesisAArch64)
-llvm_map_components_to_libnames(libs
+set(LLVM_LINK_COMPONENTS
   AArch64
-  Exegesis
   )
 
-target_link_libraries(LLVMExegesisAArch64 ${libs})
+target_link_libraries(LLVMExegesisAArch64 PRIVATE LLVMExegesis)
 set_target_properties(LLVMExegesisAArch64 PROPERTIES FOLDER "Libraries")
--- origsrc/llvm-7.0.1.src/tools/llvm-exegesis/lib/CMakeLists.txt	2018-11-28 16:46:14.000000000 -0500
+++ src/llvm-7.0.1.src/tools/llvm-exegesis/lib/CMakeLists.txt	2019-05-06 13:36:11.682323900 -0400
@@ -11,7 +11,7 @@ endif()
 
 set(LLVM_EXEGESIS_TARGETS "${LLVM_EXEGESIS_TARGETS} ${TARGETS_TO_APPEND}" PARENT_SCOPE)
 
-add_library(LLVMExegesis
+llvm_add_library(LLVMExegesis
   STATIC
   Analysis.cpp
   Assembler.cpp
@@ -28,7 +28,7 @@ add_library(LLVMExegesis
   )
 
 llvm_update_compile_flags(LLVMExegesis)
-llvm_map_components_to_libnames(libs
+set(LLVM_LINK_COMPONENTS
   Analysis
   CodeGen
   Core
@@ -46,5 +46,4 @@ if(LLVM_ENABLE_LIBPFM AND HAVE_LIBPFM)
   list(APPEND libs pfm)
 endif()
 
-target_link_libraries(LLVMExegesis ${libs})
 set_target_properties(LLVMExegesis PROPERTIES FOLDER "Libraries")
--- origsrc/llvm-7.0.1.src/tools/llvm-exegesis/lib/X86/CMakeLists.txt	2018-06-20 07:54:35.000000000 -0400
+++ src/llvm-7.0.1.src/tools/llvm-exegesis/lib/X86/CMakeLists.txt	2019-05-06 13:37:01.386592500 -0400
@@ -3,16 +3,15 @@ include_directories(
   ${LLVM_BINARY_DIR}/lib/Target/X86
   )
 
-add_library(LLVMExegesisX86
+llvm_add_library(LLVMExegesisX86
   STATIC
   Target.cpp
   )
 
 llvm_update_compile_flags(LLVMExegesisX86)
-llvm_map_components_to_libnames(libs
+set(LLVM_LINK_COMPONENTS
   X86
-  Exegesis
   )
 
-target_link_libraries(LLVMExegesisX86 ${libs})
+target_link_libraries(LLVMExegesisX86 PRIVATE LLVMExegesis)
 set_target_properties(LLVMExegesisX86 PROPERTIES FOLDER "Libraries")
--- origsrc/llvm-7.0.1.src/unittests/Passes/CMakeLists.txt	2019-05-03 16:20:44.191958100 -0400
+++ src/llvm-7.0.1.src/unittests/Passes/CMakeLists.txt	2019-05-06 12:52:52.667078900 -0400
@@ -13,7 +13,9 @@ add_llvm_unittest(PluginsTests
   )
 export_executable_symbols(PluginsTests)
 
-set(LLVM_LINK_COMPONENTS)
+set(LLVM_LINK_COMPONENTS
+  Support
+  )
 add_llvm_loadable_module(TestPlugin NO_INSTALL
   TestPlugin.cpp
   )
